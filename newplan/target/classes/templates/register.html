<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <title>登录界面</title>

    <!-- 新 Bootstrap4 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/4.1.0/css/bootstrap.min.css">

    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>

    <!-- popper.min.js 用于弹窗、提示、下拉菜单 -->
    <script src="https://cdn.bootcss.com/popper.js/1.12.5/umd/popper.min.js"></script>

    <!-- 最新的 Bootstrap4 核心 JavaScript 文件 -->
    <script src="https://cdn.bootcss.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>

    <script>
        function register() {
            //跳转到注册界面register.html进行注册
            // window.open("register.html", "_blank");  //_self,_parent,_top,_blank
            var username=$("#username").val();
            var password=$("#password").val();
            var passwords=$("#passwords").val();
            var email=$("#email").val();
            var smsCode=$("#smsCode").val();
            var phone=$("#phone").val();

            if(username==""||username==null){
                alert("用户名不能为空！");
                return false;
            }else if(password==""||password==null){
                alert("密码不能为空！");
                return false;
            }else if (password != passwords ){
                alert("密码不一致");
            }else {
                $.ajax({  // ajax登陆请求
                    url:"/user/register/" + smsCode,
                    dataType:'json',
                    contentType: "application/json;charset=utf-8",
                    type:"post",
                    data:JSON.stringify({"username":username,
                                         "password":password,
                                         "email":email,
                                         "phone":phone
                    }),
                    async:false,
                    success:function(Result){
                        if(Result.flag == true){
                            alert(Result.message)
                        }else {
                            alert(Result.code + Result.message);
                        }
                    }
                });
            }


        }
        function login() {
            //登录逻辑
        }
        function send() {
            var phone = $("#phone").val();
            $.ajax({
                url:"/check/sms/" + phone,
                dataType:'json',
                contentType: "application/json;charset=utf-8",
                type:"get",
                async:false,
                success:function(Result){

                }
            });
        }
    </script>
</head>
<body>
<!-- 登录表单 -->
<form style="margin-left:500px;margin-top:200px;">
    <div class="form-group">
        <label for="username" stype="display:inline;">用户名：</label>
        <input type="text" class="form-control" id="username" style="display:inline;width:300px;"autocomplete="off" />
    </div>
    <div class="form-group">
        <label for="phone" stype="display:inline;">手机号：</label>
        <input type="text" class="form-control" id="phone" maxlength="11" style="display:inline;width:300px;"autocomplete="off" />
        <button type="submit" class="btn btn-primary" onclick="send()">发送验证码</button>
    </div>
    <div class="form-group">
        <label for="smsCode" stype="display:inline;">验证码：</label>
        <input type="number" class="form-control" id="smsCode" maxlength="4" style="display:inline;width:300px;"autocomplete="off" />
    </div>
    <div class="form-group">
        <label for="email" stype="display:inline;">邮 箱：</label>
        <input type="email" class="form-control" id="email" style="display:inline;width:300px;"autocomplete="off" />
    </div>
    <div class="form-group">
        <label for="password" style="display:inline;">密 码：</label>
        <input type="password" class="form-control" id="password" style="display:inline;width:300px;"autocomplete="off" />
    </div>
    <div class="form-group">
        <label for="passwords" style="display:inline;">确认密码：</label>
        <input type="password" class="form-control" id="passwords" style="display:inline;width:300px;"autocomplete="off" />
    </div>
    <button type="submit" class="btn btn-primary" onclick="register()">注册</button>
</form>
</body>
</html>